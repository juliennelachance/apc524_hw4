#!/bin/bash
# Serial job:
#SBATCH -N 1                  # number of nodes
#SBATCH --ntasks-per-node=1   # number of processors per node
#SBATCH -t 4:00:00            # run for 1 hour max
#SBATCH --mail-type=begin     # send email when process begins...
#SBATCH --mail-type=end       # ...and when it ends...
#SBATCH --mail-type=fail      # ...or when it fails.
#SBATCH --mail-user=jl40@princeton.edu   # Donâ€™t forget to define your email!

# Load openmpi environment
module load openmpi

# Make sure you are in the correct directory
cd ~/apc524_hw4/

for nx in 128 256 512
do
  ./heat_serial $nx > heat_serial.$nx.1.out
  ./heat_omp $nx 1 > heat_omp.$nx.1.out
  srun ./heat_mpi $nx > heat_mpi.$nx.1.out
done
